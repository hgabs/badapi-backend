(this["webpackJsonpokapi-frontend"]=this["webpackJsonpokapi-frontend"]||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),s=a.n(r),i=a(41),o=a.n(i),l=a(65),j=a(21),u=a(47),b=a(14),d=a(189),x=a(181),p=a(180),O=a(66),h=a(157),f=a(93),m=a(173),g=a(174),y=a(185),v=a(123),k=a(172),w=a(175),C=a(124),S=a(176),N=a(159),T=a(161),M=a(162),I=a(163),P=a(164),L=a(165),B=a(166),E=a(187),R=a(4),_=Object(h.a)((function(e){return{productTable:{"& .MuiTableRow-root:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}})),F=function(e){var t=e.products,a=(e.className,_()),c=Object(n.useState)(0),r=Object(j.a)(c,2),s=r[0],i=r[1],o=window.innerHeight<1024?10:15,l=Object(n.useState)(o),u=Object(j.a)(l,2),b=u[0],d=u[1];if(Object(n.useEffect)((function(){return i(0)}),[t]),!t)return Object(R.jsx)(R.Fragment,{});var x=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0};return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(N.a,{className:a.productTable,component:v.a,children:Object(R.jsxs)(T.a,{stickyHeader:!0,children:[Object(R.jsx)(M.a,{children:Object(R.jsxs)(I.a,{children:[Object(R.jsx)(P.a,{children:"Stock"}),Object(R.jsx)(P.a,{children:"Id"}),Object(R.jsx)(P.a,{children:"Name"}),Object(R.jsx)(P.a,{children:"Manufacturer"}),Object(R.jsx)(P.a,{children:"Price"}),Object(R.jsx)(P.a,{children:"Colors"})]})}),Object(R.jsx)(L.a,{children:(b>0?t.sort(x).slice(s*b,s*b+b):t).sort(x).map((function(e){return Object(R.jsxs)(I.a,{children:[Object(R.jsx)(P.a,{children:e.availability}),Object(R.jsx)(P.a,{children:e.id}),Object(R.jsx)(P.a,{children:e.name}),Object(R.jsx)(P.a,{children:e.manufacturer}),Object(R.jsx)(P.a,{children:e.price}),Object(R.jsx)(P.a,{children:e.color.join(", ")})]},e.id)}))}),Object(R.jsx)(B.a,{children:Object(R.jsx)(I.a,{children:Object(R.jsx)(E.a,{page:s,count:t.length,rowsPerPage:b,rowsPerPageOptions:[10,15,50],onChangePage:function(e,t){return i(t)},onChangeRowsPerPage:function(e){d(parseInt(e.target.value,10)),i(0)}})})})]})})})},A=a(90),U=a.n(A),W=Object(h.a)((function(e){return{sideBar:{position:"sticky",top:e.spacing(13)},pageNotFound:{display:"flex",position:"absolute",justifyContent:"center",alignItems:"center",top:0,bottom:0,left:0,right:0}}})),D=function(e){var t=e.manufacturers,a=e.products,c=e.currentManufacturer,r=e.setCurrentManufacturer,s=Object(b.h)(),i=s.category,o=Object(f.a)(s,["category"]).manufacturer||c||t[0],l=-1===Object.keys(a).indexOf(i),j=-1===t.indexOf(o),u=Object(b.g)(),d=W(),p=Object(n.useMemo)((function(){if(!l&&!j){var e=a[i][o];return Object(R.jsx)(F,{products:e})}}),[o,i,a,l,j]),h=function(e){var t=a[i][e];return Array.isArray(t)?t.length:0};return l||j?Object(R.jsx)(x.a,{className:d.pageNotFound,children:Object(R.jsxs)(O.a,{variant:"h2",children:[Object(R.jsx)(U.a,{fontSize:"inherit",color:"error"}),"Page Not Found"]})}):Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(m.a,{className:d.root,maxWidth:!1,children:Object(R.jsxs)(g.a,{container:!0,spacing:5,children:[Object(R.jsx)(y.a,{only:["xs","sm"],children:Object(R.jsx)(g.a,{item:!0,md:2,xs:12,children:Object(R.jsx)(v.a,{className:d.sideBar,children:Object(R.jsx)(k.a,{component:"ul",subheader:Object(R.jsx)(w.a,{disableSticky:!0,children:"Brands"}),children:t.map((function(e,a){return Object(R.jsx)(C.a,{component:"li",button:!0,divider:a<t.length-1,selected:e===o,onClick:function(){r(e),u.push("/".concat(i,"/").concat(e))},children:Object(R.jsx)(S.a,{primary:"".concat(e," (").concat(h(e),")")})},e)}))})})})}),Object(R.jsx)(g.a,{item:!0,md:10,xs:12,children:p})]})})})},H=a(186),K=a(182),z=a(168),G=a(190),J=a(177),V=a(178),q=a(169),Q=a(167),X=a(184),Y=a(179),Z=a(78),$=a.n(Z),ee=a(77),te=a.n(ee),ae=a(92),ne=a.n(ae),ce=Object(h.a)((function(e){return{tab:{minHeight:"64px"},icon:{marginRight:e.spacing(1)},menu:{marginLeft:e.spacing(7)},tabIndicator:{height:"3px"},drawerCategories:{width:"250px"},selectManufacturer:{width:"100%"},title:{whiteSpace:"nowrap",fontFamily:"Bungee",textShadow:"-1px -1px 1px black, 1px 1px 1px silver",fontSize:"24pt",color:e.palette.common.white},drawerInfoWrapper:{display:"flex",justifyContent:"space-between"},infoWrapper:{display:"flex",flexDirection:"row",flexGrow:1,justifyContent:"flex-end"},appBar:{paddingLeft:e.spacing(2),marginBottom:e.spacing(5),backgroundColor:e.palette.primary.main},updateInfo:{marginRight:e.spacing(2),"& .MuiButton-label":{whiteSpace:"nowrap"}}}})),re=function(e){var t=e.categories,a=(e.setCurrentTab,e.currentManufacturer),c=e.lastUpdateTime,r=e.setCurrentManufacturer,s=e.nextUpdateTimer,i=e.manufacturers,o=Object(b.g)(),l=ce(),u=Object(b.i)("/:category"),d=Object(n.useState)(!1),p=Object(j.a)(d,2),h=p[0],f=p[1],m=u&&u.params.category?t.indexOf(u.params.category):0,g=a&&i.indexOf(a)>=0,y=new Date(c).toLocaleTimeString(),v=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&f(e)}};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(H.a,{anchor:"left",open:h,onOpen:v(!0),onClose:v(!1),children:[Object(R.jsx)(k.a,{component:"ul",className:l.drawerCategories,subheader:Object(R.jsx)(w.a,{disableSticky:!0,children:"Categories"}),children:t.map((function(e,n){return Object(R.jsx)(C.a,{button:!0,component:"li",divider:n<t.length-1,selected:m>=0&&t[m]===e,onClick:function(){var t=g?"/".concat(e,"/").concat(a):"/".concat(e);o.push(t)},children:Object(R.jsx)(S.a,{primary:e})},e)}))}),Object(R.jsx)(w.a,{children:"Manufacturers"}),Object(R.jsx)(x.a,{mx:2,children:Object(R.jsx)(K.a,{className:l.selectManufacturer,value:g?a:i[0],onChange:function(e){var a=e.target.value;r(a);var n="/".concat(t[m],"/").concat(a);o.push(n)},children:i.map((function(e){return Object(R.jsx)(z.a,{value:e,children:e},e)}))})}),Object(R.jsxs)(x.a,{className:l.drawerInfoWrapper,my:5,mx:1,children:[Object(R.jsx)(x.a,{children:Object(R.jsx)(G.a,{title:"Next update","aria-label":"next update",children:Object(R.jsxs)(J.a,{color:"secondary",variant:"contained","aria-label":"Last Update",fullWidth:!0,children:[Object(R.jsx)(te.a,{className:l.icon}),s]})})}),Object(R.jsx)(x.a,{children:Object(R.jsx)(G.a,{title:"Last update","aria-label":"last update",children:Object(R.jsxs)(J.a,{variant:"contained","aria-label":"Last Update",fullWidth:!0,children:[Object(R.jsx)($.a,{className:l.icon}),y]})})})]})]}),Object(R.jsx)(V.a,{className:l.appBar,color:"primary",position:"sticky",children:Object(R.jsxs)(q.a,{disableGutters:!0,children:[Object(R.jsx)(x.a,{display:{md:"none",lg:"none",xl:"none"},children:Object(R.jsx)(Q.a,{className:l.menuButton,color:"inherit",disableRipple:!0,onClick:v(!0),children:Object(R.jsx)(ne.a,{})})}),Object(R.jsx)(J.a,{className:l.title,onClick:function(){return o.push("/")},children:Object(R.jsx)(O.a,{className:l.title,variant:"h5",children:"BAD API"})}),Object(R.jsx)(x.a,{className:l.menu,display:{xs:"none",sm:"none",md:"block",lg:"block",xl:"block"},children:Object(R.jsx)(X.a,{"aria-label":"category tabs",classes:{indicator:l.tabIndicator},value:m>=0&&m,onChange:function(e,n){var c=g?"/".concat(t[n],"/").concat(a):"/".concat(t[n]);o.push(c)},children:t.map((function(e){return Object(R.jsx)(Y.a,{className:l.tab,label:e},e)}))})}),Object(R.jsxs)(x.a,{className:l.infoWrapper,children:[Object(R.jsx)(x.a,{className:l.updateInfo,display:{xs:"none",sm:"none",md:"flex",lg:"flex",xl:"flex"},children:Object(R.jsx)(G.a,{title:"Next update","aria-label":"next update",children:Object(R.jsxs)(J.a,{color:"secondary",variant:"contained","aria-label":"Last Update",children:[Object(R.jsx)(te.a,{className:l.icon}),s]})})}),Object(R.jsx)(x.a,{className:l.updateInfo,display:{xs:"none",sm:"none",md:"flex",lg:"flex",xl:"flex"},children:Object(R.jsx)(G.a,{title:"Last update","aria-label":"last update",children:Object(R.jsxs)(J.a,{variant:"contained","aria-label":"Last Update",mr:2,children:[Object(R.jsx)($.a,{className:l.icon}),y]})})})]})]})})]})},se=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LOCAL_API||"/api",ie=3e5,oe=["gloves","facemasks","beanies"],le=Object(h.a)((function(e){return{backdrop:{backgroundColor:e.palette.common.white,color:e.palette.primary.main},loginMessage:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}}}));var je=function(){var e=Object(n.useState)({}),t=Object(j.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(),s=Object(j.a)(r,2),i=s[0],h=s[1],f=Object(n.useState)(!1),m=Object(j.a)(f,2),g=m[0],y=m[1],v=Object(n.useState)([]),k=Object(j.a)(v,2),w=k[0],C=k[1],S=Object(n.useState)(!0),N=Object(j.a)(S,2),T=N[0],M=N[1],I=Object(n.useState)(""),P=Object(j.a)(I,2),L=P[0],B=P[1],E=Object(n.useState)(),_=Object(j.a)(E,2),F=_[0],A=_[1],U=Object(n.useState)(300),W=Object(j.a)(U,2),H=W[0],K=W[1],z=Object(n.useRef)({countdown:null,next:null}),G=le(),J=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t;case 1:if(!(a>0)){e.next=8;break}return A(a),e.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:a--,e.next=1;break;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0;case 1:if(!t){e.next=31;break}return e.prev=2,B(!1),e.next=6,fetch(se);case 6:if(503!==(a=e.sent).status){e.next=14;break}return M(!0),B("Service unavailable."),e.next=12,J(15);case 12:e.next=20;break;case 14:return e.next=16,a.json();case 16:n=e.sent,c(n),M(!1),t=!1;case 20:e.next=29;break;case 22:return e.prev=22,e.t0=e.catch(2),console.log(e.t0),M(!0),B("Failed fetching data..."),e.next=29,J(15);case 29:e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(z.current.countdown),clearTimeout(z.current.next),e.next=4,V();case 4:K(300),z.current.countdown=setInterval((function(){K((function(e){return e-1}))}),1e3),z.current.next=setTimeout(q,ie);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){q()}),[]),Object(n.useEffect)((function(){if(Object.keys(a).length){C(Object.keys(a[oe[0]])),M(!1)}}),[a]),T?Object(R.jsx)(d.a,{color:"primary",className:G.backdrop,open:T,children:Object(R.jsxs)(x.a,{className:G.loginMessage,children:[Object(R.jsx)(p.a,{color:"inherit"}),Object(R.jsx)(x.a,{m:2,children:Object(R.jsx)(O.a,{component:"div",children:L?"".concat(L,". Retrying in ").concat(F):"Loading..."})})]})}):Object(R.jsxs)(u.a,{children:[Object(R.jsx)(re,{categories:oe,currentTab:i,manufacturers:w,currentManufacturer:g,setCurrentManufacturer:y,nextUpdateTimer:H,lastUpdateTime:a.time,setCurrentTab:h}),Object(R.jsxs)(b.d,{children:[Object(R.jsx)(b.b,{exact:!0,path:["/:category","/:category/:manufacturer"],render:function(){return Object(R.jsx)(D,{manufacturers:w,currentManufacturer:g,setCurrentManufacturer:y,products:a})}}),Object(R.jsx)(b.b,{path:"/",children:Object(R.jsx)(b.a,{to:"/".concat(oe[0])})})]})]})};a(119);s.a.render(Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(je,{})}),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.3da5b68f.chunk.js.map